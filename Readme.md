# WEC ‚Äî Water‚ÄëEnergy Calculations

> **Python‚Äë–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≥–æ–¥–æ–≤—ã—Ö —Ä–µ–∂–∏–º–æ–≤ —Ä–∞–±–æ—Ç—ã –≤–æ–¥–æ—Ö—Ä–∞–Ω–∏–ª–∏—â –ì–≠–°**

---

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–ó–∞—á–µ–º –Ω—É–∂–µ–Ω WEC](#–∑–∞—á–µ–º-–Ω—É–∂–µ–Ω-wec)
2. [–¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è –æ—Å–Ω–æ–≤–∞](#—Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è-–æ—Å–Ω–æ–≤–∞)
3. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
4. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
5. [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
6. [–¢–µ—Å—Ç—ã](#—Ç–µ—Å—Ç—ã)
7. [–ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è](#–ø–ª–∞–Ω—ã-—Ä–∞–∑–≤–∏—Ç–∏—è)
8. [–õ–∏—Ü–µ–Ω–∑–∏—è](#–ª–∏—Ü–µ–Ω–∑–∏—è)

---

## –ó–∞—á–µ–º –Ω—É–∂–µ–Ω WEC

–ì–∏–¥—Ä–æ—ç–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞–Ω—Ü–∏–∏ –≥–æ–¥–æ–≤–æ–≥–æ —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫—Ä–∏—Ç–∏—á–Ω—ã –¥–ª—è –ø–æ–∫—Ä—ãÃÅ—Ç–∏—è
–ø–∏–∫–æ–≤ –Ω–∞–≥—Ä—É–∑–∫–∏, —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è —á–∞—Å—Ç–æ—Ç—ã –∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –í–ò–≠. –ó–∞–¥–∞—á–∞
**–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –≥—Ä–∞—Ñ–∏–∫–∞ —Å—Ä–∞–±–æ—Ç–∫–∏/–Ω–∞–ø–æ–ª–Ω–µ–Ω–∏—è** –≤–æ–¥–æ—Ö—Ä–∞–Ω–∏–ª–∏—â–∞
–æ—Å—Ç–∞—ë—Ç—Å—è –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –∫–∞–∫ –¥–ª—è –Ω–∞—É–∫–∏, —Ç–∞–∫ –∏ –¥–ª—è –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ—Å—Ç–∏.
WEC –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–º–ø–∞–∫—Ç–Ω—É—é, –Ω–æ —Ä–∞—Å—à–∏—Ä—è–µ–º—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é **–ø–æ–º–µ—Å—è—á–Ω–æ–π
—Å–∏–º—É–ª—è—Ü–∏–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏** —Ä–µ–∂–∏–º–∞ –ì–≠–°, –æ—Å–Ω–æ–≤–∞–Ω–Ω—É—é –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–∞—Ö –ù–ì–¢–£.

## –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è –æ—Å–Ω–æ–≤–∞

–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º:
*–º–∞–∫—Å–∏–º—É–º –≥–æ–¥–æ–≤–æ–π –≤—ã—Ä–∞–±–æ—Ç–∫–∏* `W = Œ£ N_t ¬∑ Œît`, –ø—Ä–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è—Ö

* –≤–æ–¥–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞;
* –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–∞–ø–æ—Ä–∞ –æ—Ç –æ–±—ä—ë–º–∞ `H = f(V)`;
* —É—Ä–∞–≤–Ω–µ–Ω–∏—è –º–æ—â–Ω–æ—Å—Ç–∏ `N = 8.5 ¬∑ Q ¬∑ H / 1000` (–ú–í—Ç);
* –¥–∏–∞–ø–∞–∑–æ–Ω–∞ —É—Ä–æ–≤–Ω–µ–π (–£–ú–û ‚â§ Z_–≤–± ‚â§ –ù–ü–£);
* —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π –º–æ—â–Ω–æ—Å—Ç–∏ `N_inst`.

–ê–ª–≥–æ—Ä–∏—Ç–º—ã –æ—Å–Ω–æ–≤–∞–Ω—ã –Ω–∞ —É—á–µ–±–Ω–∏–∫–∞—Ö:

| ‚Ññ    | –°—Å—ã–ª–∫–∞                                                                                   | –û–ø–∏—Å–∞–Ω–∏–µ                    |
| ---- |------------------------------------------------------------------------------------------| --------------------------- |
| \[1] | **–§–∏–ª–∏–ø–ø–æ–≤–∞ –¢.–ê. –∏ –¥—Ä.** *–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–µ–∂–∏–º–æ–≤ —ç–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞–Ω—Ü–∏–π‚Ä¶*, –ù–ì–¢–£, 2018               | –æ–±—â–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≠–≠–°       |
| \[2] | **–°–µ–∫—Ä–µ—Ç–∞—Ä–µ–≤ –Æ.–ê. –∏ –¥—Ä.** *–û—Å–Ω–æ–≤—ã —Ä–∞—Å—á—ë—Ç–æ–≤ –≥–∏–¥—Ä–æ—ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ–∂–∏–º–æ–≤ –ì–≠–°‚Ä¶*, –ù–ì–¢–£, 2020 | –≥–∏–¥—Ä–æ—ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å—á—ë—Ç—ã |

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
wec/
‚îú‚îÄ constants.py              # –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
‚îú‚îÄ domain/                   # ¬´—á–∏—Å—Ç—ã–µ¬ª –¥–∞—Ç–∞–∫–ª–∞—Å—Å—ã
‚îÇ   ‚îú‚îÄ geometry.py           # –∫—Ä–∏–≤–∞—è V‚ÄìZ –∏ Q‚ÄìZ
‚îÇ   ‚îú‚îÄ static_levels.py      # –ù–ü–£, –£–ú–û, N_inst
‚îÇ   ‚îî‚îÄ hydrological_series.py# Q_–±—ã—Ç, N_–≥–∞—Ä –ø–æ –º–µ—Å—è—Ü–∞–º
‚îú‚îÄ core/                     # –±–∏–∑–Ω–µ—Å‚Äë–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ interpolation.py      # –ø—Ä–æ—Ç–æ–∫–æ–ª Interpolator
‚îÇ   ‚îú‚îÄ formulas.py           # –≥–∏–¥—Ä–∞–≤–ª–∏—á–µ—Å–∫–∏–µ —Ñ–æ—Ä–º—É–ª—ã
‚îÇ   ‚îú‚îÄ month_selector.py     # –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –º–µ—Å—è—Ü–µ–≤
‚îÇ   ‚îî‚îÄ reservoir_simulator.py# —Å–∏–º—É–ª—è—Ü–∏—è –ø–æ ŒîV
‚îú‚îÄ optimizers/               # —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤—ã–±–æ—Ä–∞ ŒîV
‚îÇ   ‚îú‚îÄ greedy.py             # –∂–∞–¥–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º
‚îÇ   ‚îî‚îÄ dynamic.py            # –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ facade/analyzer.py        # WECAnalyzer ‚Äî –≥–ª–∞–≤–Ω—ã–π —Ñ–∞—Å–∞–¥
‚îú‚îÄ visualization/plots.py    # –≥—Ä–∞—Ñ–∏–∫–∏ (matplotlib)
‚îî‚îÄ __init__.py               # –ø—É–±–ª–∏—á–Ω—ã–π API
cli/
‚îî‚îÄ demo.py                   # –ø–æ—à–∞–≥–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä
```

### –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ

* –î–æ–±–∞–≤–ª—è–π—Ç–µ –Ω–æ–≤—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä—ã –≤ `optimizers/`, –Ω–µ —Ç—Ä–æ–≥–∞—è —Ñ–∞—Å–∞–¥.
* –†–µ–∞–ª–∏–∑—É–π—Ç–µ —Å–≤–æ–π `Interpolator` –¥–ª—è –º–æ–Ω–æ—Ç–æ–Ω–Ω—ã—Ö —Å–ø–ª–∞–π–Ω–æ–≤ –∏ —Ç.–¥.
* –ó–∞–º–µ–Ω–∏—Ç–µ backend –≥—Ä–∞—Ñ–∏–∫–æ–≤, –ø–µ—Ä–µ–ø–∏—Å–∞–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ `visualization/`.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –∫–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
$ git clone https://github.com/H2K2U/WEC4SO && cd wec

# —Å–æ–∑–¥–∞—ë–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
$ python -m venv .venv && source .venv/bin/activate

# —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ editable‚Äë—Ä–µ–∂–∏–º–µ
$ pip install -e .
```

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** `numpy`, `pandas`, `matplotlib` (MIT/BSD –ª–∏—Ü–µ–Ω–∑–∏–∏).

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
$ python cli/demo.py
```

–°–∫—Ä–∏–ø—Ç:

1. —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –æ–±—ä–µ–∫—Ç—ã –¥–∞–Ω–Ω—ã—Ö –∏–∑ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤;
2. –∑–∞–ø—É—Å–∫–∞–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî `dynamic`);
3. –≤—ã–≤–æ–¥–∏—Ç —Ç–∞–±–ª–∏—Ü—É `pandas` –∏ —Å—Ç—Ä–æ–∏—Ç –≥—Ä–∞—Ñ–∏–∫ —É—Ä–æ–≤–Ω–µ–π.

## –¢–µ—Å—Ç—ã

```bash
$ pytest -q
```

## –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è

* ‚öôÔ∏è –ü–æ–¥–¥–µ—Ä–∂–∫–∞ MILP‚Äë–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Pyomo/CBC.
* üåê REST‚ÄëAPI –Ω–∞ FastAPI –¥–ª—è —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤.
* üìä –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–∞—à–±–æ—Ä–¥‚Äë–ø–∞–Ω–µ–ª—å –Ω–∞ Plotly.


## –õ–∏—Ü–µ–Ω–∑–∏—è

**MIT License** ‚Äî —Å–≤–æ–±–æ–¥–Ω–æ –¥–ª—è –∞–∫–∞–¥–µ–º–∏—á–µ—Å–∫–æ–≥–æ –∏ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è.
